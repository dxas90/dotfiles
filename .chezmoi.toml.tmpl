{{- $secrets := promptBool "Do you want to enable secrets" false -}}
{{- $secrets_homelab := promptBool "Are you at home" false -}}
{{- $extra_tools := promptBool "Do you want to enable extra tools" false -}}

encryption = "age"
[age] # yubikey 1 and backup
  identities = ["~/.config/chezmoi/age-yubikey-identity-8241d673.txt", "~/.config/chezmoi/age-yubikey-identity-b43830ec.txt"]
  recipients = ["age1yubikey1qtdrpsk4ccyge0us58axjv9ncrenm897540r89fm9zzj6d704vdfq2tgtmd", "age1yubikey1qv7gjvxsdkg5g0sc57pd9xhx7l0d05cwd65gldmcuqpyhnc4kqaxz78apys"]
[keepassxc]
    database = "~/Sync/chezmoi.kdbx"
    mode = "open"
[scriptEnv]
{{- if $secrets }}
    BW_USER = "dxas90@gmail.com"
    SAFE_FOLDER = "$HOME/Vaults/Safe"
{{- end }}
    NIXPKGS_ALLOW_UNFREE = "1"
[merge]
  command = "nvim"
  args = [
    "-d",
    "{{ "{{" }} .Destination {{ "}}" }}",
    "{{ "{{" }} .Source {{ "}}" }}",
    "{{ "{{" }} .Target {{ "}}" }}",
  ]
[hooks.read-source-state.pre]
  command = ".local/share/chezmoi/.install-password-manager.sh"
[hooks.apply.pre]
  command = ".local/share/chezmoi/.yubikey-check.sh"
[hooks.apply.post]
  command = "fc-cache"
  args = ["-f"]

[data]
  secrets = {{ $secrets }}
  secrets_homelab = {{ $secrets_homelab }}
  extra_tools = {{ $extra_tools }}
