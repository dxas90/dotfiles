{{- $secrets := true -}}
{{- $secrets_homelab := false -}}
{{- $extra_tools := false -}}
{{- if (env "SECRETS_OFF") -}}
{{- $secrets = false -}}
{{- end -}}
{{- if (env "SECRETS_AT_HOME") -}}
{{- $secrets_homelab = true -}}
{{- end -}}
{{- if (env "EXTRA_TOOLS") -}}
{{- $extra_tools = true -}}
{{- end -}}

encryption = "age"
[age]
  identities = ["~/.config/chezmoi/age-yubikey-identity-8241d673.txt"]
  recipients = ["age1yubikey1qtdrpsk4ccyge0us58axjv9ncrenm897540r89fm9zzj6d704vdfq2tgtmd"]
[keepassxc]
    database = "~/Sync/chezmoi.kdbx"
    mode = "open"
[scriptEnv]
{{- if $secrets }}
    BW_USER = "dxas90@gmail.com"
    SAFE_FOLDER = "$HOME/Vaults/Safe"
{{- end }}
    NIXPKGS_ALLOW_UNFREE = "1"
[merge]
  command = "nvim"
  args = [
    "-d",
    "{{ "{{" }} .Destination {{ "}}" }}",
    "{{ "{{" }} .Source {{ "}}" }}",
    "{{ "{{" }} .Target {{ "}}" }}",
  ]
[hooks.read-source-state.pre]
  command = ".local/share/chezmoi/.install-password-manager.sh"
[hooks.apply.post]
  command = "fc-cache"
  args = ["-f"]

[data]
  secrets = {{ $secrets }}
  secrets_homelab = {{ $secrets_homelab }}
  extra_tools = {{ $extra_tools }}
